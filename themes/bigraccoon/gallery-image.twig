{#
 # A template to present a single gallery image, or a grouping of multiple images.  It will have a date, H2 title,
 # and prev/next buttons.  Metadata will be provided with each main image.  Finally, other related images can be
 # displayed as thumbnails (just like in the main gallery listing).
 #}
 
{% extends "_base.twig" %}


{# Need to use Twig to put the main image into the background, overriding the external CSS style file #}
{% block head_style %}
	{{ parent() }}
	<style>
		#wrapper > .bg { background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.1)), url("/{% if meta.image %}{{ resize( 'assets/' ~ meta.image, null, 800 ) }}{% else %}{{ 'assets/' ~ current_parent.meta.image }}{% endif %}"); }
	</style>
{% endblock head_style %}


{% block head_style_noscript %}
		{{ parent() }}
		<style>
			#wrapper { background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.1)), url("/{% if meta.image %}{{ resize( 'assets/' ~ meta.image, null, 800 ) }}{% else %}{{ current_parent.meta.image }}{% endif %}"); }
		</style>
{% endblock head_style_noscript %}
		

{% block page_body %}

	{# Use prev/next browsing buttons that include thumbnail images #}
	{{ include("_segment-gallery-pagination.twig") }}

				<!-- A post -->
				<section class="post">
				
					<header class="major">
						{% if meta.date %}<span class="date">{{ meta.date_formatted }}</span>{% endif %}
						{% if meta.title %}<h2>{{ meta.title }}</h2>{% endif %}
					</header>
					
					<div id="gallery-image">
						{# Clicking the image will simply open the original, full-size image file (which could be huge) #}
						<a href="{{ assets_url }}/{{ meta.image }}">
						
							{# The image displayed here is resized, so that browsing isn't slowed down by very large images #}
							<img src="/{{ resize( 'assets/' ~ meta.image, null, 800 ) }}"{% if page.meta.imagedescription %} alt="{{ page.meta.imagedescription }}"{% endif %}>
							
						</a>
					</div>
					
					<p>{{ content }}</p>
					
					{{ include("_segment-comments.twig") }}
					
				</section>

	{{ include("_segment-gallery-pagination.twig") }}
{% endblock page_body %}

{% block scripts %}
	{# Add lightbox elements and script #}
	{{ include("_segment-lightbox.twig") }}
	
	{{ parent() }}
{% endblock scripts %}